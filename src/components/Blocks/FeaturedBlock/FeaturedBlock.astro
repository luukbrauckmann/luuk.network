---
import type { FeaturedBlockFragment } from "@generated/datocms";
import LinkBlock from "../LinkBlock/LinkBlock.astro";
import { Button, LinkArea } from "@components";

type Props = {
  block: FeaturedBlockFragment;
};

const { block } = Astro.props;
---

<section class="featured-block">
    <h2>{ block.title }</h2>

    <ul class="featured-block-list">
        { block.pages.map((page) => (
            <li class="featured-block-list-item">
                <LinkArea>
                    <img class="featured-block-list-item__image" src="" alt="">
                    <div class="featured-block-list-item__details">
                        <h3 class="featured-block-list-item__title">{page.title}</h3>
                        <!-- <p class="featured-block-list-item__description">{page.description}</p> -->

                        <div>
                            <Button
                                as="a"
                                href={page.path}
                                data-astro-prefetch
                                icon="arrow-right"
                                variant="transparent"
                            >Read more <span class="sr-only">about {page.title}</span></Button>
                        </div>
                    </div>
                </LinkArea>
            </li>
        ))}
    </ul>

    <div>
        <LinkBlock block={block.link} />
    </div>
</section>

<style>
    .featured-block {
        padding:  var(--spacing-xxl) var(--spacing-lg);
        border: 1px solid oklch(0.269 0.042 263);
        margin: -1px;
        display: flex;
        flex-direction: column;
        gap: var(--spacing-xl);
    }

    .featured-block-list {
        position: relative;
        list-style-type: "";
        padding: 0;
        padding-inline: var(--spacing-lg);
        margin: 0;
        margin-inline: calc(var(--spacing-lg) * -1);
        display: flex;
        gap: var(--spacing-md);
        overflow-x: auto;
        scroll-snap-type: x mandatory;
        overscroll-behavior-x: contain;
    }

    .featured-block-list-item {
        scroll-snap-align: center;
        flex: 0 0 100%;
        display: flex;
        flex-direction: column;
    }

    .featured-block-list-item__image {
        height: 150px;
        width: 100%;
    }

    .featured-block-list-item__details {
        background-color: #415A77;
        padding: var(--spacing-lg) var(--spacing-md);
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        gap: var(--spacing-md);
        justify-content: space-between;
    }

    .featured-block-list-item__title {
        text-wrap: initial;
    }

    .featured-block-list-item__description {
        flex: 1;
    }
</style>
